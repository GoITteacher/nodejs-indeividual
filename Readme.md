# Module 2

## Знайомство з Express

### Основи роботи з Express

- що таке Express
- інсталяція
- ініціалізація
- роутинг
- req (params, body), res
- middleware (common, error)

### Middleware

- Логування: Запис інформації про кожен запит (метод, URL, час, IP тощо).
- Обробка JSON-даних: Розпакування та обробка даних у форматі JSON, що надходять від клієнта.
- Обробка URL-кодованих даних: Розкодування та обробка даних, що надходять у формі URL-кодування.
- Аутентифікація та авторизація: Перевірка інформації про аутентифікацію користувача та його прав доступу.
- Захист від атак: Включення заходів безпеки, таких як обробка CORS, захист від атак типу CSRF, перевірка параметрів запиту.
- Робота з сесіями та cookies: Обробка сесій, зберігання та читання інформації у cookies.
- Обробка статичних файлів: Надання можливості сервера обслуговувати та повертати статичні файли.
- Обробка помилок: Визначення middleware для обробки помилок на рівні додатку.
- Моніторинг та аналітика: Збір та обробка аналітичної інформації про використання застосунку.
- Кешування: Реалізація middleware для кешування результатів запитів та оптимізації швидкодії застосунку.
- Підготовка запитів до обробки: Валідація, перетворення або обробка даних до їх подальшої обробки в маршрутах.
- Маршрутизація: Реалізація middleware, які визначають маршрути та викликають відповідні обробники маршрутів.
- Аналіз та обробка хедерів: Взаємодія з хедерами запиту та відповіді для певного обробника.
- Перевірка здоров'я застосунку: Реалізація middleware, що перевіряє стан здоров'я сервера та повертає статус.

### Use Middlware

- logger
- express.json
- 404
- error

### Змінні оточення

- dotenv
- .env
- функція env()

---

## Mongo DB

### Підключення

- mongoose
- ```js
  export const initMongoDB = async () => {
    try {
      const user = env('MONGODB_USER');
      const pwd = env('MONGODB_PASSWORD');
      const url = env('MONGODB_URL');
      const db = env('MONGODB_DB');

      await mongoose.connect(
        `mongodb+srv://${user}:${pwd}@${url}/${db}?retryWrites=true&w=majority`,
      );
      console.log('Mongo connection successfully established!');
    } catch (e) {
      console.log('Error while setting up mongo connection', e);
      throw e;
    }
  };
  ```

- схеми
- колекція
